{"version":3,"sources":["webpack:///./src/views/User.vue?647b","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?6a5a","webpack:///./src/views/User.vue","webpack:///./src/views/User.vue?46f5","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack:///./src/common/images/user.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","user","email","username","on","$event","$router","back","collectMovies","length","_e","logout","staticRenderFns","name","data","computed","created","getUserInfo","methods","$axios","get","then","res","code","post","component","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_objectSpread","target","i","arguments","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","module","exports"],"mappings":"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","file":"js/chunk-7d8796f1.ba4961f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Transition',{attrs:{\"name\":\"fade\"}},[(_vm.user)?_c('div',{staticClass:\"user\"},[_c('div',{staticClass:\"userinfo-wrapper\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":require(\"common/images/user.png\"),\"width\":\"32\"}})]),_c('div',{staticClass:\"info\"},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.user.email))]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.user.username))])]),_c('i',{staticClass:\"iconfont icon-left\",on:{\"click\":function($event){return _vm.$router.back()}}})]),_c('div',{staticClass:\"menu-wrapper\"},[_c('ul',{staticClass:\"menus\"},[_c('li',{staticClass:\"menu-item\"},[_c('i',{staticClass:\"iconfont icon-user1\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"我的资料\")]),_c('i',{staticClass:\"iconfont icon-right\"})]),_c('li',{staticClass:\"menu-item\"},[_c('i',{staticClass:\"iconfont icon-collect\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"我的收藏\")]),_c('i',{staticClass:\"iconfont icon-right\"}),(_vm.collectMovies.length)?_c('span',{staticClass:\"text count\"},[_vm._v(_vm._s(_vm.collectMovies.length))]):_vm._e()])])]),_c('div',{staticClass:\"btn-wrapper\"},[_c('button',{staticClass:\"logout-btn\",on:{\"click\":_vm.logout}},[_vm._v(\"退出\")])])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Transition name=\"fade\">\n    <div v-if=\"user\" class=\"user\">\n      <div class=\"userinfo-wrapper\">\n        <div class=\"avatar\">\n          <img src=\"~common/images/user.png\" width=\"32\">\n        </div>\n        <div class=\"info\">\n          <span class=\"text\">{{ user.email }}</span>\n          <span class=\"text\">{{ user.username }}</span>\n        </div>\n        <i class=\"iconfont icon-left\" @click=\"$router.back()\"/>\n      </div>\n      <div class=\"menu-wrapper\">\n        <ul class=\"menus\">\n          <li class=\"menu-item\">\n            <i class=\"iconfont icon-user1\"/>\n            <span class=\"text\">我的资料</span>\n            <i class=\"iconfont icon-right\"/>\n          </li>\n          <li class=\"menu-item\">\n            <i class=\"iconfont icon-collect\"/>\n            <span class=\"text\">我的收藏</span>\n            <i class=\"iconfont icon-right\"/>\n            <span v-if=\"collectMovies.length\" class=\"text count\">{{ collectMovies.length }}</span>\n          </li>\n        </ul>\n      </div>\n      <div class=\"btn-wrapper\">\n        <button class=\"logout-btn\" @click=\"logout\">退出</button>\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<script>\nimport Cookie from 'js-cookie'\nimport { mapState } from 'vuex'\n\nconst COOKIE_NAME = 'movie_trailer_user'\n\nexport default {\n  name: 'User',\n  data () {\n    return {\n      collectMovies: []\n    }\n  },\n  computed: {\n    ...mapState([\n      'user'\n    ])\n  },\n  created () {\n    this.getUserInfo()\n  },\n  methods: {\n    getUserInfo () {\n      this.$axios.get('/api/user/get_collects').then(res => {\n        if (res.code === 1001) {\n          this.collectMovies = res.result.movies\n        }\n      })\n    },\n    logout () {\n      this.$axios.post('/api/user/logout').then(res => {\n        if (res.code === 1001) {\n          Cookie.remove(COOKIE_NAME)\n          this.$store.commit('setUserInfo', null)\n          this.$router.push('/')\n        }\n      })\n    }\n\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.user\n  position fixed\n  top 0\n  bottom 0\n  width 100%\n  z-index 10\n  background #fff\n  .userinfo-wrapper\n    display flex\n    justify-content center\n    align-items center\n    height 175px\n    background url('~common/images/background.jpg') no-repeat\n    background-size cover\n    .avatar\n      display flex\n      align-items center\n      justify-content center\n      width 67px\n      height 67px\n      background #eee\n      border-radius 50%\n    .info\n      display flex\n      flex-direction column\n      padding-left 10px\n      font-size 18px\n      color #fff\n      .text\n        flex 1\n        line-height 33px\n    .icon-left\n      position absolute\n      top 10px\n      left 10px\n      font-size 25px\n      color #fff\n  .menu-wrapper\n    .menus\n      padding-left 10px\n      .menu-item\n        padding 10px\n        font-size 18px\n        line-height 25px\n        list-style none\n        border-bottom 1px solid #d8d8d8\n        color #333\n        .iconfont\n          vertical-align text-bottom\n          font-size 25px\n          color #999\n          margin-right 8px\n        .count\n          float right\n          margin-right 5px\n          color #999\n          font-size 15px\n        .icon-right\n          font-size 20px\n          float right\n  .btn-wrapper\n    padding 20px\n    .logout-btn\n      width 100%\n      height 48px\n      line-height 48px\n      font-size 18px\n      border none\n      border-radius 48px\n      color #fff\n      background-color #f13900\n      outline none\n.fade-enter-active, .fade-leave-active\n  transition all .5s\n.fade-enter, .fade-leave-to\n  transform translateX(100%)\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=26ada635&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=26ada635&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26ada635\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=26ada635&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=26ada635&lang=stylus&scoped=true&\"","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","module.exports = __webpack_public_path__ + \"img/user.2a89b2cb.png\";"],"sourceRoot":""}