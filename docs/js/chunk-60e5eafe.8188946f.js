(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60e5eafe"],{"1a33":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Transition",{attrs:{name:"fade"}},[i("div",{staticClass:"list"},[i("TheBackHeader",[i("div",{staticClass:"tabs"},t._l(t.tabs,(function(e,a){return i("div",{key:e,staticClass:"item",class:{active:t.activeIdx===a},on:{click:function(e){return t.switchTab(a)}}},[i("span",[t._v(t._s(e))])])})),0)]),i("div",{staticClass:"content-wrapper"},[i("ScrollView",{attrs:{data:t.movieList,"pull-up-load":!0},on:{"pulling-up":t.loadMore}},[t._l(t.movieList,(function(e){return i("Card",{key:e._id,attrs:{movie:e},on:{select:t.gotoDetail}})})),i("div",{staticClass:"pull-up-wrap"},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.pullUpLoading,expression:"pullUpLoading"}]},[t._v("正在加载...")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.noMore,expression:"noMore"}]},[t._v("没有更多了~")])])],2)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.movieList.length,expression:"!movieList.length"}],staticClass:"loading-wrap"},[i("Loading")],1)],1)])},s=[],n=i("db19"),o={name:"List",components:{TheBackHeader:n["a"]},data:function(){return{movieList:[],count:0,page:1,tabs:["即将上映","正在热映"],activeIdx:+this.$route.params.type,pullUpLoading:!1}},computed:{noMore:function(){return this.count===this.movieList.length&&0!==this.count}},created:function(){this.getMovieList()},beforeRouteUpdate:function(t,e,i){this.page=1,this.movieList=[],this.count=0,this.activeIdx=+t.params.type,i(),this.getMovieList()},methods:{getMovieList:function(){var t=this,e={page:this.page,page_size:10,type:this.$route.params.type};this.$axios.get("/api/movie/get_movies",{params:e}).then((function(e){1001===e.code&&(t.movieList=t.movieList.concat(e.result.movies),t.count=e.result.count),t.$nextTick((function(){t.pullUpLoading=!1}))}))},switchTab:function(t){this.activeIdx=t,this.$router.push("/list/".concat(t))},loadMore:function(){var t=this.movieList,e=this.count;t.length!==e&&(this.page+=1,this.pullUpLoading=!0,this.getMovieList())},gotoDetail:function(t){this.$router.push("/movie/".concat(t))}}},c=o,r=(i("b484"),i("2877")),u=Object(r["a"])(c,a,s,!1,null,"68bbab60",null);e["default"]=u.exports},"6a50":function(t,e,i){"use strict";var a=i("7414"),s=i.n(a);s.a},7414:function(t,e,i){},"9d84":function(t,e,i){},b484:function(t,e,i){"use strict";var a=i("9d84"),s=i.n(a);s.a},db19:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"back-header"},[i("i",{staticClass:"iconfont icon-left",on:{click:function(e){return t.$router.back()}}}),t._t("default")],2)},s=[],n={name:"TheBackHeader"},o=n,c=(i("6a50"),i("2877")),r=Object(c["a"])(o,a,s,!1,null,"16cdf5d2",null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-60e5eafe.8188946f.js.map